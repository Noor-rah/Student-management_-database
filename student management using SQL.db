CREATE TABLE Instructors (
    InstructorID INT PRIMARY KEY,
    Name VARCHAR(100)
);

CREATE TABLE Courses (
    CourseID INT PRIMARY KEY,
    Title VARCHAR(255),
    InstructorID INT,
    Credits INT,
    Capacity INT,
    FOREIGN KEY (InstructorID) REFERENCES Instructors(InstructorID)
);

CREATE TABLE Students (
    StudentID INT PRIMARY KEY,
    FullName VARCHAR(100),
    EnrollmentDate DATE
);

CREATE TABLE Enrollments (
    EnrollmentID INT PRIMARY KEY,
    StudentID INT,
    CourseID INT,
    EnrollmentDate DATE,
    Grade CHAR(2),
    FOREIGN KEY (StudentID) REFERENCES Students(StudentID),
    FOREIGN KEY (CourseID) REFERENCES Courses(CourseID)
);


#inserting sample data


INSERT INTO Instructors VALUES 
(1, 'Dr. Emily Stone'), 
(2, 'Prof. John Miller');

INSERT INTO Courses VALUES 
(201, 'Database Systems', 1, 4, 30),
(202, 'Operating Systems', 2, 3, 25),
(203, 'Data Structures', 1, 3, 40);

INSERT INTO Students VALUES 
(1, 'Michael Brown', '2022-09-01'),
(2, 'Sarah Parker', '2023-01-15');

INSERT INTO Enrollments VALUES 
(1, 1, 201, '2023-02-01', 'A'),
(2, 2, 203, '2023-02-10', NULL);


SELECT c.Title, i.Name AS Instructor, c.Capacity
FROM Courses c
JOIN Instructors i ON c.InstructorID = i.InstructorID;

SELECT s.FullName, c.Title, e.EnrollmentDate, e.Grade
FROM Enrollments e
JOIN Students s ON e.StudentID = s.StudentID
JOIN Courses c ON e.CourseID = c.CourseID;

SELECT Title FROM Courses WHERE Capacity > 0;

UPDATE Courses SET Capacity = Capacity - 1 WHERE CourseID = 202;

DELETE FROM Enrollments WHERE EnrollmentID = 1;
